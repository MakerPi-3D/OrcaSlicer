{
	"type": "machine",
	"setting_id": "GM001",
	"name": "MakerPI S6 0.4 nozzle",
	"from": "system",
	"instantiation": "true",
	"inherits": "fdm_machine_common",
	"printer_model": "MakerPI S6",
	"default_print_profile": "0.20mm Standard @MakerPI S6",
	"nozzle_diameter": [
		"0.4"
	],
	"extruder_colour": [
		"#FCE94F"
	],
	"extruder_offset": [
		"0x0"
	],
	"printable_area": [
        "0x0",
        "200x0",
        "200x190",
        "0x190"
	],
	"printable_height": "290",
	"nozzle_type": "hardened_steel",
	"auxiliary_fan": "0",
	"machine_max_acceleration_travel": [
		"1500"
	],
	"machine_max_speed_x": [
        "400"
	],
	"machine_max_speed_y": [
        "400"
	],
	"max_layer_height": [
		"0.4"
	],
	"min_layer_height": [
		"0.1"
	],
	"printer_settings_id": "MakerPI",
	"retraction_minimum_travel": [
		"0.6"
	],
	"retract_before_wipe": [
		"0%"
	],
	"retraction_length": [
		"0.5"
	],
	"retract_length_toolchange": [
		"0"
	],
 	"retract_when_changing_layer": [
		"1"
	],
	"retract_restart_extra": [
		"0"
	],
	"retract_restart_extra_toolchange": [
		"0"
	],
	"retraction_speed": [
		"40"
	],
	"deretraction_speed": [
		"0"
	],
	"wipe": [
		"1"
	],
	"single_extruder_multi_material": "0",
	"change_filament_gcode": "",
	"machine_pause_gcode": "; pause print\nM2000",
	"default_filament_profile": [
		"MakerPI Generic PLA"
	],
	"machine_load_filament_time": "25",
	"machine_max_acceleration_e": [
		"5000"
	],
	"machine_max_acceleration_extruding": [
		"20000"
	],
	"machine_max_acceleration_retracting": [
		"5000"
	],
	"machine_max_acceleration_x": [
        "15000"
	],
	"machine_max_acceleration_y": [
        "15000"
	],
	"machine_max_acceleration_z": [
		"500"
	],
	"machine_max_jerk_e": [
		"2.5"
	],
	"machine_max_jerk_x": [
		"9"
	],
	"machine_max_jerk_y": [
		"9"
	],
	"machine_max_jerk_z": [
		"3"
	],
	"machine_max_speed_e": [
		"30"
	],
	"machine_max_speed_z": [
		"20"
	],
	"machine_unload_filament_time": "29",
	"scan_first_layer": "0",
	"upward_compatible_machine": [],
	"thumbnails_format": "PNG",
	"before_layer_change_gcode": "TIMELAPSE_TAKE_FRAME\nG92 E0",
	"machine_start_gcode": ";===== machine: Makerpi S6 ========================\n;===== date: 20230707 =====================\nG28\n;===== turn on the HB fan =================\nM104 S75 ;set extruder temp to turn on the HB fan and prevent filament oozing from nozzle\n;===== reset machine status =================\nG91\nG1 Z5 F300;\nG90\nM220 S100 ;Reset Feedrate\nM221 S100 ;Reset Flowrate\nM221 X0 Y0 Z0 ; turn off soft endstop to prevent protential logic problem\nM204 S10000 ; init ACC set to 10m/s^2\n\n;===== heatbed preheat ====================\nM140 S[bed_temperature_initial_layer_single] ;set bed temp\nM190 S[bed_temperature_initial_layer_single] ;wait for bed temp\n\n;=============turn on fans to prevent PLA jamming=================\n{if filament_type[initial_extruder]==\"PLA\"}\n    {if (bed_temperature[initial_extruder] >45)||(bed_temperature_initial_layer[initial_extruder] >45)}\n    M106 P3 S180\n    {endif};Prevent PLA from jamming\n{endif}\nM106 P2 S100 ; turn on big fan ,to cool down toolhead\n\n;===== prepare print temperature and material ==========\nM104 S[nozzle_temperature_initial_layer] ;set extruder temp\nG91\nG0 Z10 F1200\nG90\nG28 X\nG1 X210 F12000\nG1 Y0\nG1 Y5 F3000\n\n;=============turn on fans to prevent PLA jamming=================\n{if filament_type[initial_extruder]==\"PLA\"}\n    {if (bed_temperature[initial_extruder] >45)||(bed_temperature_initial_layer[initial_extruder] >45)}\n    M106 P3 S180\n    {endif};Prevent PLA from jamming\n{endif}\nM106 P2 S100 ; turn on big fan ,to cool down toolhead\n\n;===== bed leveling ==================================\nM109 S140\n; Always pass `ADAPTIVE_MARGIN=0` because Orca has already handled `adaptive_bed_mesh_margin` internally\n; Make sure to set ADAPTIVE to 0 otherwise Klipper will use it's own adaptive bed mesh logic\nBED_MESH_CLEAR\nBED_MESH_CALIBRATE mesh_min={adaptive_bed_mesh_min[0]},{adaptive_bed_mesh_min[1]} mesh_max={adaptive_bed_mesh_max[0]},{adaptive_bed_mesh_max[1]} ALGORITHM=[bed_mesh_algo] PROBE_COUNT={bed_mesh_probe_count[0]},{bed_mesh_probe_count[1]} ADAPTIVE=0 ADAPTIVE_MARGIN=0\n;===== bed leveling end ================================\n\n;===== nozzle load line ===============================\nG90\nM83\nG1 X-5 Y1 Z0.8 F18000;Move to start position\nM109 S{nozzle_temperature_initial_layer[initial_extruder]}\nG1 Z0.2\nG0 E2 F300\nG0 Y192 E15 F{outer_wall_volumetric_speed/(0.3*0.5)     * 60}\nG0 X6 E0.700 F{outer_wall_volumetric_speed/(0.3*0.5)/ 4 * 60}\nG0 Y191.5\nG0 E0.2\nG0 X-4.5 E0.700\nG0 Y1 E15 F{outer_wall_volumetric_speed/(0.3*0.5)     * 60}\nM400\n\n;===== for Textured PEI Plate , lower the nozzle as the nozzle was touching topmost of the texture when homing ==\n;curr_bed_type={curr_bed_type}\n{if curr_bed_type==\"Textured PEI Plate\"}\nG29.1 Z{-0.04} ; for Textured PEI Plate\n{endif}\n;========turn off light and wait extrude temperature =============\nM106 S0 ; turn off fan\nM106 P2 S0 ; turn off big fan\nM106 P3 S0 ; turn off chamber fan",
	"machine_end_gcode": "M221 T0 S100\nM104 S0\nM140 S0\nM107\nM106 P2 S0\nG91\nG1 E-1 F300\nG1 Z+0.5 E-5 X-20 Y-20 F9000.00\nG28 X0 Y0\nM84\nG90",
	"layer_change_gcode": "G92 E0\n; update layer progress\nM73 L{layer_num+1}\n"

}